<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>前端播放m3u8格式视频</title>
    <script src="https://cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>
    <!-- videojs-contrib-hls 用于在电脑端播放 如果只需手机播放可以不引入 -->
</head>
<body>
    <style>
        .video-js .vjs-tech {position: relative !important;}
    </style>
    <div>
        <video id="video" controls style="width:100%;height:600px;"></video>
    </div>
    <!-- <div class="qiehuan" style="width:100px;height: 100px;background: red;margin:0 auto;line-height: 100px;color:#fff;text-align: center">切换视频</div> -->
</body>
 
<script>
    window.onload = function() {
        var xhr = new XMLHttpRequest();
        var url = "http://192.168.50.79:8888/medium.m3u8?key=";
        xhr.open('GET', `${url + window.btoa("hello")}`, true);
        xhr.onload = function (e) {
            if (this.status == 200) {
                const m3u8 = window.atob(this.response)
                if(Hls.isSupported()) {
                    var video = document.getElementById('video');
                    var hls = new Hls();
                    hls.loadSource(m3u8);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.MANIFEST_PARSED,function() {
                        video.play();
                    });
                }
            }
        };
        xhr.send();
    }
</script>
